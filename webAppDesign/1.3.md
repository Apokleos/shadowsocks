#  Web应用开发实录后端篇 后端程序编写 设计接口处理流程

上文中，我们小试牛刀，尝试了各种方法，终于搞定了数据库的模型文件，并且顺利的生成了一个数据库。但那仅仅是数据库而已。

我们还得好好想想，我们的后端构架，到底要如何来实现。我们先来分析一下我们的需求：

1. 我们的程序需要启动一个 `http` 服务。
2. 我们的服务需要对应多个 `api` 前缀。
3. `/api/v1/be/` 前缀的接口需要登录。
4. `/api/v1/fe/` 前缀的接口只有 `GET` 权限。
5. 将数据库中存在的表，按照 `RESTful` 风格进行输出。
6. 但是这些接口并不能完全直接输出，有些需要处理一下，比如管理员密码不能给出去。
7. 除了数据库中的表，还需要补充几个其他的接口，比如登录登出。
8. ……

哎呀，这怎么实现呢？光写一个数据库模型文件，很显然是达不到我们想要的这些功能的。我们自己来设计个接口处理的流程。

后端同学开会，经过不断的头脑风暴，最终接口请求处理流程图如下：

![后端处理流程图](https://raw.githubusercontent.com/fengcms/articles/master/image/37/3fb691f8e9f63e3b0b6bee0a369fbf.svg?sanitize=true)

## 详解流程图

流程图是画出来了，但是这只是一个大纲而已，我们需要对每一步进行解释。

### 判断接口前缀

我们可以在 `/config.py` 中用一个参数，将系统要支持的接口前缀列在这里。然后我们在请求进来之后，直接读取这个参数，进行比对判断，即可判断请求的接口前缀是否是我们系统支持的。




