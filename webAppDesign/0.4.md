# Web应用开发实录产品篇 设计一个文章系统 接口约定（一）

原型图过会之后，对于整个项目的所有需求，产品以及前后端开发人员都已经了然了。然后我们把系统构架，以及数据库再经过调整之后，重新整理一下，发给相应开发人员。

## 文章系统最终构架确定

![系统构架](https://raw.githubusercontent.com/fengcms/articles/master/image/f9/0dbca0315343b73f9806ed1e94540b.jpg)

虽然只是一期开发，我们要将可能的拓展先考虑好。虽然非常可能这个考虑是多余的，亦或是，这个考虑是完全不够的。但问题是，如果我们一开始就考虑的特别死板，对于我们项目后续的升级将是非常可怕的。

尽可能的保证系统的可拓展性，是在一个项目一开始，就必须要考虑的。

比如我们这个项目，如果我们使用一个现成的 `cms` 系统开发，是完全可以满足需求的。但是未来如果要进行上图的拓展，可能就会变得比较困难。

而我们一开始就确定，前后端分离的系统构架，无论在未来甲方希望拓展什么样新的展示模式，我们只需要进行相对应的开发即可，因为接口什么的，已经提前预留好了。

前后端分离的开发模式，也是目前主流的开发模式，这种模式最大的好处就是可以分离开发，同步进行。前后端在开发之前，我们先约定接口规范。然后前端可以自己架设 `mock` 假数据接口，使用假接口来模拟真实环境，进行对应开发。而后端只需要对照约定接口，去开发相关的任务即可。

如果出现了 `BUG`，也非常便于定位问题。最重要的是，前端开发前端的，后端开发后端的，开发内容互不影响。而前后端不分离的开发模式，往往出现一个简单的前端需求变更，需要前端后端坐在一起开发，非常影响效率。

## 数据库表与字段确定

![数据库设计](https://raw.githubusercontent.com/fengcms/articles/master/image/89/0546b185066110cbd745bbb6e44997.jpg)

其实这个表的变动和前面一开始的设计来说，是基本没什么变动的。只是产品在设计原型图的时候加入了回收站这个概念，所以文章数据表增加了 `isdelete` 这个字段而已。另外，还加入了点击数的 `hits` 字段。

还有就是频道栏目加上了排序字段，以及其他的一些小的变化。



## 原版 RESTful 风格

`RESTful` 是一种 `Api` 接口的设计风格，它不是标准。

一个简单的系统，对应数据库的操作有4中——`CRUD`，也就是我们工程师常说的增删改查。而我们常见的 `http` 请求方法包含 `GET POST PUT PATCH DELETE` 这些方法。我们可以用这些方法来一一对应同一个接口的不同操作。

- GET（SELECT）：从服务器取出资源（一项或多项）。
- POST（CREATE）：在服务器新建一个资源。
- PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。
- PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）。
- DELETE（DELETE）：从服务器删除资源。

如上（括号内是对应的`sql`方法）下面我们举一些例子：

- GET /zoos：列出所有动物园
- POST /zoos：新建一个动物园
- GET /zoos/ID：获取某个指定动物园的信息
- PUT /zoos/ID：更新某个指定动物园的信息（提供该动物园的全部信息）
- PATCH /zoos/ID：更新某个指定动物园的信息（提供该动物园的部分信息）
- DELETE /zoos/ID：删除某个动物园
- GET /zoos/ID/animals：列出某个指定动物园的所有动物
- DELETE /zoos/ID/animals/ID：删除某个指定动物园的指定动物

> 以上示例出自于阮一峰老师的博客《[RESTful API 设计指南](http://www.ruanyifeng.com/blog/2014/05/restful_api.html)》

更多有关 `RESTful` 风格内容，请自行搜索并寻找答案。

下一章节中，我们就来约定我们自己的接口啦！

> 本文由 FungLeo 原创，未经书面许可，严禁转载。

