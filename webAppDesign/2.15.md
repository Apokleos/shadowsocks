# Web应用开发实录前端篇 管理后台前端 封装面包屑、分页组件

在列表视图中，我们使用了面包屑、分页等 `element` 组件，这些组件为了便于大家使用，有很多的配置项。而我们的某一个项目中这些配置项大体都是一致的，只有展示的数据不一致。因此，我们可以将这些重复使用的内容进行封装抽离，让我们的业务代码更加简单。

我这里以面包屑和分页组件为例，后面我们还会继续封装其他的内容。

## 封装面包屑组件

首先，我们来封装面包屑，在封装之前，我们有必要对原装的组件有一定的认识。

### 分析原装组件

面包屑组件官方文档地址：http://element-cn.eleme.io/#/zh-CN/component/breadcrumb

官方演示代码如下：

```html
<el-breadcrumb separator="/">
  <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>
  <el-breadcrumb-item><a href="/">活动管理</a></el-breadcrumb-item>
  <el-breadcrumb-item>活动列表</el-breadcrumb-item>
  <el-breadcrumb-item>活动详情</el-breadcrumb-item>
</el-breadcrumb>
```

通过查看文档我们得知 `separator` 是配置分割符，我们还可以使用 `separator-class` 来指定风格字体图标。而组件内的内容就是一项一项的链接了，组件支持 `vue-router` 的链接、普通 `a` 链接，还有无链接。

在我们的系统中不存在 `a` 链接的面包屑导航。因此，只有路由链接无和链接。这是一个高度可循环的数据，因此，我们完全可以简单的封装该组件。

至于数据，我希望越简单越好。虽然我们可以传更加符合需求的数据过去，但本来就是降低复杂度的处理，再搞一个复杂的数据就让我觉得有一点恶心。因此，我们设计了这样的数据结构：

```js
['辅助管理', '作者管理-/auxiliary/author']
```

首先构建一个数组，这个数组内就是需要循环的面包屑数据。如果需要链接，就加一个短横杠，后面缀上相应的链接地址。我们在封装的组件内进行字符串的判断处理，就可以简单的实现这个功能。

> 这个简单的封装是因为一些原因的，实际可以使用 `vue-router` 的数据，进行更加简单的封装。不过在我这不太合适，所以就放弃了。如果你有兴趣，可以在任何组件内打印 `this.$router` 查看数据信息，你会发现其中有一些数据是非常适合用来制作面包屑导航的。
> 
> ![路由信息](https://raw.githubusercontent.com/fengcms/articles/master/image/94/f3502545ba32a9bec208b113271388.jpg)


### 创建二次封装面包屑组件

我们首先在 `@/coms/` 文件夹下新建文件夹 `common`，用于存放这些公用组件。然后我们创建 `@/coms/common/breadcrumb.vue` 文件，并录入以下代码：

```html
<template>
  <el-breadcrumb separator-class="el-icon-arrow-right">
    <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>
    <template v-for="i in bread">
      <el-breadcrumb-item
        v-if="i.indexOf('-') === -1"
        :key="i"
      >
        {{i}}
      </el-breadcrumb-item>
      <el-breadcrumb-item
        v-else
        :key="i"
        :to="{ path: i.split('-')[1] }"
      >
        {{i.split('-')[0]}}
      </el-breadcrumb-item>
    </template>
  </el-breadcrumb>
</template>
<script>
export default {
  props: {
    bread: Array
  }
}
</script>
```

